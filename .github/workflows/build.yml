name: Final Sliver Build
on: [push, workflow_dispatch]
jobs:
  get-official-server:
    runs-on: ubuntu-latest
    steps:
      - name: Download Official ARM64 Server
        run: |
          # سحب النسخة الرسمية مباشرة من خوادم GitHub Releases
          curl -L "https://github.com/BishopFox/sliver/releases/latest/download/sliver-server_linux_arm64" -o sliver-server-arm64
          
          # التأكد من أن الملف ليس فارغاً (حماية من الروابط المكسورة)
          if [ ! -s sliver-server-arm64 ]; then echo "Download failed!" && exit 1; fi
          
          chmod +x sliver-server-arm64

      - name: Upload Verified Binary
        uses: actions/upload-artifact@v4
        with:
          name: sliver-server-arm64
          path: sliver-server-arm64
